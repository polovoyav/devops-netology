# 05-virt-01-basics.

## Задача 1
Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.
```
Аппаратная виртуализация - гипервизор сам является операционной системой, гостевая ОС полностью изолирована и может быть любой, оборудование хоста полностью эмулировано и недоступно напрямую в ВМ, ресурсы жестко разделены, ядро ОС гостевой ВМ не модифицируется.
Паравиртуализация - гипервизор ставится поверх ОС хостовой машины, гостевая ОС  изолирована частично, но может быть любой, ядро ОС гостевой ВМ модифицируется для работы с гипервизором, производительность выше, чем при полной виртуализации.
Виртуализация на основе ОС - слой гипервизора отсутствует, ВМ работают, как изолированные процессы ОС хоста, используются устройства хостовой машины, ядро гостевой ОС гостевой не может отличаться от ядра ОС хоста.
```

## Задача 2
Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
```
Паравиртуализация. Позволит сохранить производительность почти, как у физического сервера. При этом, можно пользоваться удобствами виртуализации - кластерами, репликациями, балансировкой, снапшотами, что обеспечит отказоустойчивость и быстрое восстановление.
```
- Различные web-приложения.
```
Контейнеризация. Нет смысла под каждое веб-приложение ставить отдельную ОС, слишком много ресурсов, достаточно изолировать их от хостовой ОС и друг от друга.
```
- Windows системы для использования бухгалтерским отделом.
```
Предпочтительна паравиртуализация для отказоустойчивости и бэкапа данных при сохранении производительности. Но некоторые бухгалтерские продукты, например, с usb-токенами не позволяющими пробросить себя в гостевую ОС, могут потребовать установки на физический сервер. 
```
- Системы, выполняющие высокопроизводительные расчеты на GPU.
```
Физический сервер для максимально эффективного использования аппаратных ресурсов.
```

## Задача 3
Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:
1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
```
Вполне можно использовать Hyper-V, раз в основном windows-инфраструктура. Всё, что требуется он умеет и устанавливается бесплатно. Думаю, можно использовать любой из гипервизоров - Hyper-V, VMWare, KVM, Xen.
```

2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
```
Видимо, идеально подходит KVM - бесплатный, open source, Linux и Windows поддерживаются, активно развивается. Плюс производительный из-за паравиртуализации.
```

3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
```
Windows инфраструктура подразумевает виртуализацию на базе Hyper-V. Это удобнее из-за наличия общих иструментов  и принципов управления, да хотя бы Active Directory.
```

4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.
```
Виртуализация на уровне ОС, например с помощью Docker. Я думаю, это оптимально для тестирования программы по использованию ресурсов и по скорости развертывания. Ядро одного типа, опять же. Хотя KVM использовать тоже никто не мешает.
```

## Задача 4
Опишите возможные проблемы и недостатки гетерогенной среды виртуализации и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.
```
Основная проблемы в этом случае - разные инструменты виртуализации и управления, необходимость обладать компетенциями в разных системах, трудоемкость оркестрации хостов с разными гипервизорами.
Как возможный сценарий видится: Windows-инфраструктура на Hyper-V с Active Directory, VDI, корпоративными сервисами Microsoft и бухгалтерией на базе 1С, и Linux-инфраструктура на KVM для прокси, шлюзов, веб-серверов, почты. Или с какими-то Linux-дистрибутивами, которые не поддерживаются Hyper-V.
Создавать или нет гетерогенную среду, наверное определяется задачами и доступными ресурсами. Если хочется бесплатно, при этом разумно - почему бы не использовать Hyper-V c KVM.
Но при наличии отсутствия средств, я бы предпочел гомогенную среду, например на vSphere.
```
